{% extends "base_generic.html" %}

{% block content %}
    {% load static %}

    <h1 id="page-title" data-toggle="tooltip" data-html="true" data-placement="left"
      title="total <b>{{authors_count}} authors</b> in bookdb">
      Authors  
    </h1>
    
<link rel="stylesheet" href="/static/bootstrap4/dist/css/bootstrap.css" />
<link rel="stylesheet" href="/static/bootstrap-table/bootstrap-table.css" />
<link rel="stylesheet" type="text/css" href="/static/bootstrap-table/extensions/filter-control/bootstrap-table-filter-control.css">

<style>
  table.authors {
    table-layout: fixed;
  }
  #authorslist thead > tr > th.detail,
  #authorslist tbody > tr:not(.detail-view) > td:first-of-type {
    display: none;
  }
  th.author_id {
    width: 48px;
  }
  th.author_name {
  }
  th.book_rating_avg {
    width: 70px;
  }
  th.book_count {
    width: 60px;
  }
  th.author_latest_book {
    width: 480px;
  }
</style>

<script src="{% static "js-cookie/js.cookie.js" %}"></script>
<script src="{% static "popper.js/dist/popper.js" %}"></script>
<script src="{% static "jquery/dist/jquery.js" %}"></script>
<script src="{% static "bootstrap4/dist/js/bootstrap.js" %}"></script>
<script src="{% static "bootstrap-table/bootstrap-table.js" %}"></script>

<script src="/static/bootstrap-table/extensions/filter-control/bootstrap-table-filter-control.js"></script>
<script src="/static/bootstrap-table/extensions/cookie/bootstrap-table-cookie.js"></script>

<div class="container">
  <div id="toolbarAuthors"></div>  
  <table class="table table-sm authors" id="authorslist"
    data-toggle="table"
    data-show-columns="true"
    data-url="/bookshelf/authors/search"
    data-pagination="true"
    data-side-pagination="server"
    data-search="false"
    data-filter-control="true" 
    data-filter-show-clear="true"
    data-click-to-select="true"
    data-sort-name="name"
    data-sort-order="asc"
    data-cookie="true"
    data-cookie-id-table="authors"
    data-cookie-storage="cookieStorage"
    data-detail-view="true" 
    data-detail-formatter="detailFormatterAuthor">  <!-- see view getAuthorsListDetails -->
    <thead>
      <th data-field="id" class="author_id">#</th>
      <th id="col-name" data-field="name" class="author_name"
        data-filter-control="input" 
        data-sortable="true"
        scope="col">Name</th>
      <th id="col-name" data-field="book_rating_avg" class="book_rating_avg"
        title="average rating of all books read from author"
        data-filter-control="false" 
        data-sortable="false"
        scope="col">Rating</th>
      <th id="col-name" data-field="book_count" class="book_count"
        title="number of books (for list of books, click onto row)"
        data-filter-control="false" 
        data-sortable="false"
        scope="col">Books</th>
      <th id="col-updated" data-field="latest_book" class="author_latest_book"
        data-filter-control="false" 
        data-sortable="false" 
        scope="col">Latest Book</th>
    </thead>
  </table>
</div>

<script src="{% static 'js/authors_table.js' %}"></script>
    
{% endblock %}

